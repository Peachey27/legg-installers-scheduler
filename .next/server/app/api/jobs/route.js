"use strict";(()=>{var e={};e.id=204,e.ids=[204],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},7553:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>j,patchFetch:()=>N,requestAsyncStorage:()=>h,routeModule:()=>f,serverHooks:()=>_,staticGenerationAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>m,POST:()=>b,runtime:()=>p});var a=r(9303),o=r(8716),n=r(670),l=r(7070),i=r(3719),u=r(3887),d=r(4770),c=r(7745);let p="nodejs";async function m(e){try{let e=await i.db.select().from(u.jobs).where((0,c.Ft)(u.jobs.deletedAt));return l.NextResponse.json(e,{status:200})}catch(e){return console.error("GET /api/jobs failed",e),l.NextResponse.json({error:String(e)},{status:500})}}async function b(e){try{let t=await e.json(),r=new Date().toISOString().slice(0,10),s={id:(0,d.randomUUID)(),clientName:t.clientName??"",clientAddress:t.clientAddress??"",clientPhone:t.clientPhone??"",billingAddress:t.billingAddress??t.clientAddress??"",jobAddress:t.jobAddress??"",dateTaken:t.dateTaken??r,totalPrice:t.totalPrice??null,description:t.description??"",invoiceNumber:t.invoiceNumber??null,estimateNumber:t.estimateNumber??null,cashSaleNumber:t.cashSaleNumber??null,measurements:t.measurements??null,glassOrProductDetails:t.glassOrProductDetails??null,quotedRange:t.quotedRange??null,internalNotes:t.internalNotes??null,assignedDate:t.assignedDate??null,estimatedDurationHours:t.estimatedDurationHours??null,crew:t.crew??null,areaTag:t.areaTag??"Other",status:t.status??"backlog",factoryJobId:t.factoryJobId??null,photo1Url:t.photo1Url??null,photo2Url:t.photo2Url??null,photo3Url:t.photo3Url??null,deletedAt:null},a=["clientName","clientAddress","jobAddress","description"].filter(e=>!s[e]);if(a.length)return l.NextResponse.json({error:`Missing required fields: ${a.join(", ")}`},{status:400});return await i.db.insert(u.jobs).values(s),l.NextResponse.json(s,{status:201})}catch(e){return console.error("Create job failed",e),l.NextResponse.json({error:String(e)},{status:500})}}let f=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/jobs/route",pathname:"/api/jobs",filename:"route",bundlePath:"app/api/jobs/route"},resolvedPagePath:"C:\\Users\\Michael\\Desktop\\Installer App\\src\\app\\api\\jobs\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:_}=f,j="/api/jobs/route";function N(){return(0,n.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:g})}},3719:(e,t,r)=>{r.d(t,{db:()=>d});var s=r(9802),a=r(2237),o=r(3887);let n=process.env.DATABASE_URL;if(!n)throw Error("DATABASE_URL env var is not set");let l=(0,a.qn)(n),i=(e,t,r)=>Array.isArray(e)&&Object.prototype.hasOwnProperty.call(e,"raw")?l(e,t,r):(l.query??l)(e,t,r),u=l.query??l;i.query=(...e)=>u(...e);let d=(0,s.tS)(i,{schema:o})},3887:(e,t,r)=>{r.r(t),r.d(t,{daySettings:()=>l,jobs:()=>n});var s=r(985),a=r(2140),o=r(3888);let n=(0,s.af)("jobs",{id:(0,a.fL)("id").primaryKey().notNull(),clientName:(0,a.fL)("client_name").notNull(),clientAddress:(0,a.fL)("client_address").notNull(),clientPhone:(0,a.fL)("client_phone").notNull(),billingAddress:(0,a.fL)("billing_address"),jobAddress:(0,a.fL)("job_address").notNull(),dateTaken:(0,a.fL)("date_taken").notNull(),totalPrice:(0,o.kw)("total_price"),description:(0,a.fL)("description").notNull(),invoiceNumber:(0,a.fL)("invoice_number"),estimateNumber:(0,a.fL)("estimate_number"),cashSaleNumber:(0,a.fL)("cash_sale_number"),measurements:(0,a.fL)("measurements"),glassOrProductDetails:(0,a.fL)("glass_or_product_details"),quotedRange:(0,a.fL)("quoted_range"),internalNotes:(0,a.fL)("internal_notes"),assignedDate:(0,a.fL)("assigned_date"),estimatedDurationHours:(0,o.kw)("estimated_duration_hours"),crew:(0,a.fL)("crew"),areaTag:(0,a.fL)("area_tag").notNull().default("Other"),status:(0,a.fL)("status").notNull().default("backlog"),factoryJobId:(0,a.fL)("factory_job_id"),photo1Url:(0,a.fL)("photo1_url"),photo2Url:(0,a.fL)("photo2_url"),photo3Url:(0,a.fL)("photo3_url"),deletedAt:(0,a.fL)("deleted_at")}),l=(0,s.af)("day_settings",{date:(0,a.fL)("date").primaryKey(),areaLabel:(0,a.fL)("area_label")})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972,802],()=>r(7553));module.exports=s})();