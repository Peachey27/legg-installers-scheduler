"use strict";(()=>{var e={};e.id=301,e.ids=[301],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2161:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>j,patchFetch:()=>g,requestAsyncStorage:()=>_,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>L});var a={};r.r(a),r.d(a,{DELETE:()=>b,GET:()=>c,PUT:()=>f,runtime:()=>p});var o=r(9303),s=r(8716),n=r(670),i=r(7070),d=r(3719),l=r(3887),u=r(7745);let p="nodejs";async function c(e,{params:t}){let[r]=await d.db.select().from(l.jobs).where((0,u.eq)(l.jobs.id,t.id));return!r||r.deletedAt?i.NextResponse.json({error:"Not found"},{status:404}):i.NextResponse.json(r)}async function f(e,{params:t}){try{let r=await e.json();return await d.db.update(l.jobs).set(r).where((0,u.eq)(l.jobs.id,t.id)),i.NextResponse.json({ok:!0})}catch(e){return console.error("Update job failed",e),i.NextResponse.json({error:String(e)},{status:500})}}async function b(e,{params:t}){return await d.db.update(l.jobs).set({deletedAt:new Date().toISOString()}).where((0,u.eq)(l.jobs.id,t.id)),i.NextResponse.json({ok:!0})}let m=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/jobs/[id]/route",pathname:"/api/jobs/[id]",filename:"route",bundlePath:"app/api/jobs/[id]/route"},resolvedPagePath:"C:\\Users\\Michael\\Desktop\\Installer App\\src\\app\\api\\jobs\\[id]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:_,staticGenerationAsyncStorage:L,serverHooks:h}=m,j="/api/jobs/[id]/route";function g(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:L})}},3719:(e,t,r)=>{r.d(t,{db:()=>u});var a=r(9802),o=r(2237),s=r(3887);let n=process.env.DATABASE_URL;if(!n)throw Error("DATABASE_URL env var is not set");let i=(0,o.qn)(n),d=(e,t,r)=>Array.isArray(e)&&Object.prototype.hasOwnProperty.call(e,"raw")?i(e,t,r):(i.query??i)(e,t,r),l=i.query??i;d.query=(...e)=>l(...e);let u=(0,a.tS)(d,{schema:s})},3887:(e,t,r)=>{r.r(t),r.d(t,{daySettings:()=>i,jobs:()=>n});var a=r(985),o=r(2140),s=r(3888);let n=(0,a.af)("jobs",{id:(0,o.fL)("id").primaryKey().notNull(),clientName:(0,o.fL)("client_name").notNull(),clientAddress:(0,o.fL)("client_address").notNull(),clientPhone:(0,o.fL)("client_phone").notNull(),billingAddress:(0,o.fL)("billing_address"),jobAddress:(0,o.fL)("job_address").notNull(),dateTaken:(0,o.fL)("date_taken").notNull(),totalPrice:(0,s.kw)("total_price"),description:(0,o.fL)("description").notNull(),invoiceNumber:(0,o.fL)("invoice_number"),estimateNumber:(0,o.fL)("estimate_number"),cashSaleNumber:(0,o.fL)("cash_sale_number"),measurements:(0,o.fL)("measurements"),glassOrProductDetails:(0,o.fL)("glass_or_product_details"),quotedRange:(0,o.fL)("quoted_range"),internalNotes:(0,o.fL)("internal_notes"),assignedDate:(0,o.fL)("assigned_date"),estimatedDurationHours:(0,s.kw)("estimated_duration_hours"),crew:(0,o.fL)("crew"),areaTag:(0,o.fL)("area_tag").notNull().default("Other"),status:(0,o.fL)("status").notNull().default("backlog"),factoryJobId:(0,o.fL)("factory_job_id"),photo1Url:(0,o.fL)("photo1_url"),photo2Url:(0,o.fL)("photo2_url"),photo3Url:(0,o.fL)("photo3_url"),deletedAt:(0,o.fL)("deleted_at")}),i=(0,a.af)("day_settings",{date:(0,o.fL)("date").primaryKey(),areaLabel:(0,o.fL)("area_label")})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972,802],()=>r(2161));module.exports=a})();